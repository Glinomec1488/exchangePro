{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useAppSelector}from\"../../../../../../store/hooks\";import useExchangeRate from\"./hooks/useExchangeRate\";import Captcha from\"./components/captcha\";import Email from\"./components/email\";import Receiver from\"./components/receiver\";import ReferalCode from\"./components/referalCode\";import useForm from\"./hooks/useForm\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";let isLoaded=false;export const setIsLoaded=loaded=>{isLoaded=loaded;};export const getIsLoaded=()=>{return isLoaded;};export const Form=()=>{const{fromCurrency,toCurrency}=useAppSelector(state=>state.exchange);const{exchangeRate,toCurrencyAmount,fromCurrencyAmount,setFromCurrencyAmount,setToCurrencyAmount,setIsChangeInput}=useExchangeRate();const[tempAmount,setTempAmount]=useState(fromCurrencyAmount);const[loading,setLoading]=useState(true);// Loading state\nconst[isValid,setIsValid]=useState(true);const validateInput=amount=>{const numericAmount=Number(amount);const isWithinRange=numericAmount>=exchangeRate.fromCurrenycRange.from&&numericAmount<=exchangeRate.fromCurrenycRange.to;setIsValid(isWithinRange);// Update isValid based on range check\nif(!getIsLoaded()){setLoading(true);}if(isWithinRange){setIsChangeInput(true);setFromCurrencyAmount(amount);if(getIsLoaded()){setLoading(false);}}else{setIsLoaded(false);}};useEffect(()=>{setLoading(true);validateInput(tempAmount);});const{sendForm}=useForm();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:async e=>await sendForm(e,fromCurrencyAmount,toCurrencyAmount),className:\"exchange__block-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"exchange__block-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"exchange__block-text exchange__block-text-send\",children:[\"You send\",\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",exchangeRate.fromCurrenycRange.from,\" \\u2014\",\" \",exchangeRate.fromCurrenycRange.to,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"exchange__block-header exchange__block-header-send\",children:fromCurrency.fullName}),/*#__PURE__*/_jsx(\"input\",{className:\"exchange__block-input exchange__block-input-val exchange__block-input-send\",type:\"number\",step:\"any\",value:tempAmount,onChange:e=>{setTempAmount(e.target.value);validateInput(tempAmount);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"exchange__block-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"exchange__block-text exchange__block-text-receive\",children:\"You receive\"}),/*#__PURE__*/_jsx(\"div\",{className:\"exchange__block-header exchange__block-header-receive\",children:toCurrency.fullName}),/*#__PURE__*/_jsx(\"input\",{className:`exchange__block-input exchange__block-input-val exchange__block-input-receive ${loading?\"loading\":\"\"}`,type:\"number\",step:\"any\",value:toCurrencyAmount,onChange:e=>{setIsChangeInput(true);setToCurrencyAmount(e.target.value);},readOnly:true})]}),/*#__PURE__*/_jsx(Receiver,{}),/*#__PURE__*/_jsx(Email,{}),/*#__PURE__*/_jsx(ReferalCode,{}),/*#__PURE__*/_jsx(Captcha,{}),/*#__PURE__*/_jsx(\"button\",{className:\"exchange__block-btn\",disabled:loading||!isValid,children:\"Continue\"})]});};export default Form;","map":{"version":3,"names":["React","useState","useEffect","useAppSelector","useExchangeRate","Captcha","Email","Receiver","ReferalCode","useForm","jsxs","_jsxs","jsx","_jsx","isLoaded","setIsLoaded","loaded","getIsLoaded","Form","fromCurrency","toCurrency","state","exchange","exchangeRate","toCurrencyAmount","fromCurrencyAmount","setFromCurrencyAmount","setToCurrencyAmount","setIsChangeInput","tempAmount","setTempAmount","loading","setLoading","isValid","setIsValid","validateInput","amount","numericAmount","Number","isWithinRange","fromCurrenycRange","from","to","sendForm","onSubmit","e","className","children","fullName","type","step","value","onChange","target","readOnly","disabled"],"sources":["C:/Users/1/Videos/exchangePro-main/client/src/screens/home/components/exchange/components/form/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAppSelector } from \"../../../../../../store/hooks\";\nimport useExchangeRate from \"./hooks/useExchangeRate\";\nimport Captcha from \"./components/captcha\";\nimport Email from \"./components/email\";\nimport Receiver from \"./components/receiver\";\nimport ReferalCode from \"./components/referalCode\";\nimport useForm from \"./hooks/useForm\";\n\nlet isLoaded: boolean = false;\n\nexport const setIsLoaded = (loaded: boolean) => {\n  isLoaded = loaded;\n};\n\nexport const getIsLoaded = (): boolean => {\n  return isLoaded;\n};\n\nexport const Form = () => {\n  const { fromCurrency, toCurrency } = useAppSelector(\n    (state) => state.exchange\n  );\n\n  const {\n    exchangeRate,\n    toCurrencyAmount,\n    fromCurrencyAmount,\n    setFromCurrencyAmount,\n    setToCurrencyAmount,\n    setIsChangeInput,\n  } = useExchangeRate();\n\n  const [tempAmount, setTempAmount] = useState<string>(fromCurrencyAmount);\n  const [loading, setLoading] = useState<boolean>(true); // Loading state\n  const [isValid, setIsValid] = useState<boolean>(true);\n\n  const validateInput = (amount: string) => {\n    const numericAmount = Number(amount);\n    const isWithinRange =\n      numericAmount >= exchangeRate.fromCurrenycRange.from &&\n      numericAmount <= exchangeRate.fromCurrenycRange.to;\n\n    setIsValid(isWithinRange); // Update isValid based on range check\n    if (!getIsLoaded()) {\n      setLoading(true);\n    }\n    if (isWithinRange) {\n      setIsChangeInput(true);\n      setFromCurrencyAmount(amount);\n      if (getIsLoaded()) {\n        setLoading(false);\n      }\n    } else {\n      setIsLoaded(false);\n    }\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    validateInput(tempAmount);\n  });\n\n  const { sendForm } = useForm();\n\n  return (\n    <form\n      onSubmit={async (e) =>\n        await sendForm(e, fromCurrencyAmount, toCurrencyAmount)\n      }\n      className=\"exchange__block-form\"\n    >\n      <div className=\"exchange__block-wrapper\">\n        <div className=\"exchange__block-text exchange__block-text-send\">\n          You send{\" \"}\n          <span>\n            ({exchangeRate.fromCurrenycRange.from} â€”{\" \"}\n            {exchangeRate.fromCurrenycRange.to})\n          </span>\n        </div>\n        <div className=\"exchange__block-header exchange__block-header-send\">\n          {fromCurrency.fullName}\n        </div>\n        <input\n          className=\"exchange__block-input exchange__block-input-val exchange__block-input-send\"\n          type=\"number\"\n          step=\"any\"\n          value={tempAmount}\n          onChange={(e) => {\n            setTempAmount(e.target.value);\n            validateInput(tempAmount);\n          }}\n        />\n      </div>\n      <div className=\"exchange__block-wrapper\">\n        <div className=\"exchange__block-text exchange__block-text-receive\">\n          You receive\n        </div>\n        <div className=\"exchange__block-header exchange__block-header-receive\">\n          {toCurrency.fullName}\n        </div>\n        <input\n          className={`exchange__block-input exchange__block-input-val exchange__block-input-receive ${\n            loading ? \"loading\" : \"\"\n          }`}\n          type=\"number\"\n          step=\"any\"\n          value={toCurrencyAmount}\n          onChange={(e) => {\n            setIsChangeInput(true);\n            setToCurrencyAmount(e.target.value);\n          }}\n          readOnly\n        />\n      </div>\n      <Receiver />\n      <Email />\n      <ReferalCode />\n      <Captcha />\n      <button className=\"exchange__block-btn\" disabled={loading || !isValid}>\n        Continue\n      </button>\n    </form>\n  );\n};\n\nexport default Form;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}