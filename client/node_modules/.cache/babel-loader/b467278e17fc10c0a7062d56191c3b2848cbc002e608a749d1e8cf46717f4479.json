{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getEnv } from '../../../../utils';\nconst url = getEnv(process.env.REACT_APP_SERVER_URL, 'REACT_APP_SERVER_URL');\nconst useHistory = () => {\n  _s();\n  const [history, setHistory] = useState([]);\n  const getHistory = async () => {\n    try {\n      const historyRes = await fetch(`${url}/transactions`).then(res => res.json());\n      setHistory(historyRes.map(elem => ({\n        txHash: elem.txHash,\n        block: elem.block,\n        fromm: elem.fromm,\n        to: elem.to,\n        value: elem.value\n      })));\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n  useEffect(() => {\n    if (history.length === 0) getHistory();\n  });\n  useEffect(() => {\n    const timer = setInterval(() => {\n      fetch(`${url}/genTrans`).then(res => res.json()).then(res => {\n        const slicedHistory = history.slice(0, -1);\n        setHistory([{\n          txHash: res.txHash,\n          block: res.block,\n          fromm: res.fromAddress,\n          to: res.to,\n          value: res.value\n        }, ...slicedHistory]);\n      });\n    }, 5000);\n    return () => {\n      clearInterval(timer);\n    };\n  });\n  return {\n    history\n  };\n};\n_s(useHistory, \"VmUxS4u0t8RiZeKr4m/wtD9tlfg=\");\nexport default useHistory;","map":{"version":3,"names":["useState","useEffect","getEnv","url","process","env","REACT_APP_SERVER_URL","useHistory","_s","history","setHistory","getHistory","historyRes","fetch","then","res","json","map","elem","txHash","block","fromm","to","value","error","console","message","length","timer","setInterval","slicedHistory","slice","fromAddress","clearInterval"],"sources":["/home/mayaku/Documents/exchangePro/client/src/screens/home/components/txHistory/useHistory.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { getEnv } from '../../../../utils'\n\nconst url = getEnv(process.env.REACT_APP_SERVER_URL, 'REACT_APP_SERVER_URL')\n\nexport interface IHistoryItem {\n    block: string,\n    fromm: string,\n    to: string,\n    txHash: string,\n    value: string,\n}\n\nconst useHistory = () => {\n    const [history, setHistory] = useState<IHistoryItem[]>([])\n\n    const getHistory = async () => {\n        try {\n            const historyRes: IHistoryItem[] = await fetch(`${url}/transactions`).then(res => res.json())\n            setHistory(historyRes.map(elem => (\n                {\n                    txHash: elem.txHash,\n                    block: elem.block,\n                    fromm: elem.fromm,\n                    to: elem.to,\n                    value: elem.value\n                }\n            )))\n        } catch (error: any) {\n            console.error(error.message)\n        }\n    }\n\n    useEffect(() => {\n        if (history.length === 0) getHistory()\n    })\n\n    useEffect(() => {\n        const timer = setInterval(() => {\n            fetch(`${url}/genTrans`)\n                .then(res => res.json())\n                .then(res => {\n                    const slicedHistory = history.slice(0, -1)\n                    setHistory([\n                        {\n                            txHash: res.txHash,\n                            block: res.block,\n                            fromm: res.fromAddress,\n                            to: res.to,\n                            value: res.value\n                        },\n                        ...slicedHistory\n                    ])\n                })\n        }, 5000)\n\n        return () => {\n            clearInterval(timer)\n        }\n    })\n\n    return {\n        history\n    }\n}\n\nexport default useHistory"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,MAAM,QAAQ,mBAAmB;AAE1C,MAAMC,GAAG,GAAGD,MAAM,CAACE,OAAO,CAACC,GAAG,CAACC,oBAAoB,EAAE,sBAAsB,CAAC;AAU5E,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAiB,EAAE,CAAC;EAE1D,MAAMW,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,IAAI;MACA,MAAMC,UAA0B,GAAG,MAAMC,KAAK,CAAC,GAAGV,GAAG,eAAe,CAAC,CAACW,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;MAC7FN,UAAU,CAACE,UAAU,CAACK,GAAG,CAACC,IAAI,KAC1B;QACIC,MAAM,EAAED,IAAI,CAACC,MAAM;QACnBC,KAAK,EAAEF,IAAI,CAACE,KAAK;QACjBC,KAAK,EAAEH,IAAI,CAACG,KAAK;QACjBC,EAAE,EAAEJ,IAAI,CAACI,EAAE;QACXC,KAAK,EAAEL,IAAI,CAACK;MAChB,CAAC,CACJ,CAAC,CAAC;IACP,CAAC,CAAC,OAAOC,KAAU,EAAE;MACjBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;IAChC;EACJ,CAAC;EAEDzB,SAAS,CAAC,MAAM;IACZ,IAAIQ,OAAO,CAACkB,MAAM,KAAK,CAAC,EAAEhB,UAAU,CAAC,CAAC;EAC1C,CAAC,CAAC;EAEFV,SAAS,CAAC,MAAM;IACZ,MAAM2B,KAAK,GAAGC,WAAW,CAAC,MAAM;MAC5BhB,KAAK,CAAC,GAAGV,GAAG,WAAW,CAAC,CACnBW,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACC,GAAG,IAAI;QACT,MAAMe,aAAa,GAAGrB,OAAO,CAACsB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1CrB,UAAU,CAAC,CACP;UACIS,MAAM,EAAEJ,GAAG,CAACI,MAAM;UAClBC,KAAK,EAAEL,GAAG,CAACK,KAAK;UAChBC,KAAK,EAAEN,GAAG,CAACiB,WAAW;UACtBV,EAAE,EAAEP,GAAG,CAACO,EAAE;UACVC,KAAK,EAAER,GAAG,CAACQ;QACf,CAAC,EACD,GAAGO,aAAa,CACnB,CAAC;MACN,CAAC,CAAC;IACV,CAAC,EAAE,IAAI,CAAC;IAER,OAAO,MAAM;MACTG,aAAa,CAACL,KAAK,CAAC;IACxB,CAAC;EACL,CAAC,CAAC;EAEF,OAAO;IACHnB;EACJ,CAAC;AACL,CAAC;AAAAD,EAAA,CAnDKD,UAAU;AAqDhB,eAAeA,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}