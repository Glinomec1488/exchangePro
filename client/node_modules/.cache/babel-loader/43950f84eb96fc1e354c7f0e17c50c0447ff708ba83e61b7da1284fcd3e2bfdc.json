{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/diarrhea/Downloads/exchangePro-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/diarrhea/Downloads/exchangePro-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/diarrhea/Downloads/exchangePro-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useAppSelector}from\"../../../../../../store/hooks\";import useExchangeRate from\"./hooks/useExchangeRate\";import Captcha from\"./components/captcha\";import Email from\"./components/email\";import Receiver from\"./components/receiver\";import ReferalCode from\"./components/referalCode\";import useForm from\"./hooks/useForm\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var isLoaded=false;export var setIsLoaded=function setIsLoaded(loaded){isLoaded=loaded;};export var getIsLoaded=function getIsLoaded(){return isLoaded;};export var Form=function Form(){var _useAppSelector=useAppSelector(function(state){return state.exchange;}),fromCurrency=_useAppSelector.fromCurrency,toCurrency=_useAppSelector.toCurrency;var _useExchangeRate=useExchangeRate(),exchangeRate=_useExchangeRate.exchangeRate,toCurrencyAmount=_useExchangeRate.toCurrencyAmount,fromCurrencyAmount=_useExchangeRate.fromCurrencyAmount,setFromCurrencyAmount=_useExchangeRate.setFromCurrencyAmount,setToCurrencyAmount=_useExchangeRate.setToCurrencyAmount,setIsChangeInput=_useExchangeRate.setIsChangeInput;var _useState=useState(fromCurrencyAmount),_useState2=_slicedToArray(_useState,2),tempAmount=_useState2[0],setTempAmount=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// Loading state\nvar _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isValid=_useState6[0],setIsValid=_useState6[1];var validateInput=function validateInput(amount){var numericAmount=Number(amount);var isWithinRange=numericAmount>=exchangeRate.fromCurrenycRange.from&&numericAmount<=exchangeRate.fromCurrenycRange.to;setIsValid(isWithinRange);// Update isValid based on range check\nif(!getIsLoaded()){setLoading(true);}if(isWithinRange){setIsChangeInput(true);setFromCurrencyAmount(amount);if(getIsLoaded()){setLoading(false);}}else{setIsLoaded(false);}};useEffect(function(){setLoading(true);validateInput(tempAmount);});var _useForm=useForm(),sendForm=_useForm.sendForm;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return sendForm(e,fromCurrencyAmount,toCurrencyAmount);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),className:\"exchange__block-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"exchange__block-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"exchange__block-text exchange__block-text-send\",children:[\"You send\",\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",exchangeRate.fromCurrenycRange.from,\" \\u2014\",\" \",exchangeRate.fromCurrenycRange.to,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"exchange__block-header exchange__block-header-send\",children:fromCurrency.fullName}),/*#__PURE__*/_jsx(\"input\",{className:\"exchange__block-input exchange__block-input-val exchange__block-input-send\",type:\"number\",step:\"any\",value:tempAmount,onChange:function onChange(e){setTempAmount(e.target.value);validateInput(tempAmount);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"exchange__block-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"exchange__block-text exchange__block-text-receive\",children:\"You receive\"}),/*#__PURE__*/_jsx(\"div\",{className:\"exchange__block-header exchange__block-header-receive\",children:toCurrency.fullName}),/*#__PURE__*/_jsx(\"input\",{className:\"exchange__block-input exchange__block-input-val exchange__block-input-receive \".concat(loading?\"loading\":\"\"),type:\"number\",step:\"any\",value:toCurrencyAmount,onChange:function onChange(e){setIsChangeInput(true);setToCurrencyAmount(e.target.value);},readOnly:true})]}),/*#__PURE__*/_jsx(Receiver,{}),/*#__PURE__*/_jsx(Email,{}),/*#__PURE__*/_jsx(ReferalCode,{}),/*#__PURE__*/_jsx(Captcha,{}),/*#__PURE__*/_jsx(\"button\",{className:\"exchange__block-btn\",disabled:loading||!isValid,children:\"Continue\"})]});};export default Form;","map":{"version":3,"names":["React","useState","useEffect","useAppSelector","useExchangeRate","Captcha","Email","Receiver","ReferalCode","useForm","isLoaded","setIsLoaded","loaded","getIsLoaded","Form","state","exchange","fromCurrency","toCurrency","exchangeRate","toCurrencyAmount","fromCurrencyAmount","setFromCurrencyAmount","setToCurrencyAmount","setIsChangeInput","tempAmount","setTempAmount","loading","setLoading","isValid","setIsValid","validateInput","amount","numericAmount","Number","isWithinRange","fromCurrenycRange","from","to","sendForm","e","fullName","target","value"],"sources":["C:/Users/diarrhea/Downloads/exchangePro-main/client/src/screens/home/components/exchange/components/form/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAppSelector } from \"../../../../../../store/hooks\";\nimport useExchangeRate from \"./hooks/useExchangeRate\";\nimport Captcha from \"./components/captcha\";\nimport Email from \"./components/email\";\nimport Receiver from \"./components/receiver\";\nimport ReferalCode from \"./components/referalCode\";\nimport useForm from \"./hooks/useForm\";\n\nlet isLoaded: boolean = false;\n\nexport const setIsLoaded = (loaded: boolean) => {\n  isLoaded = loaded;\n};\n\nexport const getIsLoaded = (): boolean => {\n  return isLoaded;\n};\n\nexport const Form = () => {\n  const { fromCurrency, toCurrency } = useAppSelector(\n    (state) => state.exchange\n  );\n\n  const {\n    exchangeRate,\n    toCurrencyAmount,\n    fromCurrencyAmount,\n    setFromCurrencyAmount,\n    setToCurrencyAmount,\n    setIsChangeInput,\n  } = useExchangeRate();\n\n  const [tempAmount, setTempAmount] = useState<string>(fromCurrencyAmount);\n  const [loading, setLoading] = useState<boolean>(true); // Loading state\n  const [isValid, setIsValid] = useState<boolean>(true);\n\n  const validateInput = (amount: string) => {\n    const numericAmount = Number(amount);\n    const isWithinRange =\n      numericAmount >= exchangeRate.fromCurrenycRange.from &&\n      numericAmount <= exchangeRate.fromCurrenycRange.to;\n\n    setIsValid(isWithinRange); // Update isValid based on range check\n    if (!getIsLoaded()) {\n      setLoading(true);\n    }\n    if (isWithinRange) {\n      setIsChangeInput(true);\n      setFromCurrencyAmount(amount);\n      if (getIsLoaded()) {\n        setLoading(false);\n      }\n    } else {\n      setIsLoaded(false);\n    }\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    validateInput(tempAmount);\n  });\n\n  const { sendForm } = useForm();\n\n  return (\n    <form\n      onSubmit={async (e) =>\n        await sendForm(e, fromCurrencyAmount, toCurrencyAmount)\n      }\n      className=\"exchange__block-form\"\n    >\n      <div className=\"exchange__block-wrapper\">\n        <div className=\"exchange__block-text exchange__block-text-send\">\n          You send{\" \"}\n          <span>\n            ({exchangeRate.fromCurrenycRange.from} â€”{\" \"}\n            {exchangeRate.fromCurrenycRange.to})\n          </span>\n        </div>\n        <div className=\"exchange__block-header exchange__block-header-send\">\n          {fromCurrency.fullName}\n        </div>\n        <input\n          className=\"exchange__block-input exchange__block-input-val exchange__block-input-send\"\n          type=\"number\"\n          step=\"any\"\n          value={tempAmount}\n          onChange={(e) => {\n            setTempAmount(e.target.value);\n            validateInput(tempAmount);\n          }}\n        />\n      </div>\n      <div className=\"exchange__block-wrapper\">\n        <div className=\"exchange__block-text exchange__block-text-receive\">\n          You receive\n        </div>\n        <div className=\"exchange__block-header exchange__block-header-receive\">\n          {toCurrency.fullName}\n        </div>\n        <input\n          className={`exchange__block-input exchange__block-input-val exchange__block-input-receive ${\n            loading ? \"loading\" : \"\"\n          }`}\n          type=\"number\"\n          step=\"any\"\n          value={toCurrencyAmount}\n          onChange={(e) => {\n            setIsChangeInput(true);\n            setToCurrencyAmount(e.target.value);\n          }}\n          readOnly\n        />\n      </div>\n      <Receiver />\n      <Email />\n      <ReferalCode />\n      <Captcha />\n      <button className=\"exchange__block-btn\" disabled={loading || !isValid}>\n        Continue\n      </button>\n    </form>\n  );\n};\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}