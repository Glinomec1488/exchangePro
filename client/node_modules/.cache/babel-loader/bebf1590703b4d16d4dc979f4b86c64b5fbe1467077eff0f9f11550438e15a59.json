{"ast":null,"code":"import _classCallCheck from \"C:/Users/diarrhea/Downloads/exchangePro-main/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/diarrhea/Downloads/exchangePro-main/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/diarrhea/Downloads/exchangePro-main/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/diarrhea/Downloads/exchangePro-main/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Polling } from \"./polling.js\";\n/**\n * HTTP long-polling based on the built-in `fetch()` method.\n *\n * Usage: browser, Node.js (since v18), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/fetch\n * @see https://caniuse.com/fetch\n * @see https://nodejs.org/api/globals.html#fetch\n */\nexport var Fetch = /*#__PURE__*/function (_Polling) {\n  _inherits(Fetch, _Polling);\n  var _super = _createSuper(Fetch);\n  function Fetch() {\n    _classCallCheck(this, Fetch);\n    return _super.apply(this, arguments);\n  }\n  _createClass(Fetch, [{\n    key: \"doPoll\",\n    value: function doPoll() {\n      var _this = this;\n      this._fetch().then(function (res) {\n        if (!res.ok) {\n          return _this.onError(\"fetch read error\", res.status, res);\n        }\n        res.text().then(function (data) {\n          return _this.onData(data);\n        });\n      }).catch(function (err) {\n        _this.onError(\"fetch read error\", err);\n      });\n    }\n  }, {\n    key: \"doWrite\",\n    value: function doWrite(data, callback) {\n      var _this2 = this;\n      this._fetch(data).then(function (res) {\n        if (!res.ok) {\n          return _this2.onError(\"fetch write error\", res.status, res);\n        }\n        callback();\n      }).catch(function (err) {\n        _this2.onError(\"fetch write error\", err);\n      });\n    }\n  }, {\n    key: \"_fetch\",\n    value: function _fetch(data) {\n      var _this3 = this;\n      var _a;\n      var isPost = data !== undefined;\n      var headers = new Headers(this.opts.extraHeaders);\n      if (isPost) {\n        headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n      }\n      (_a = this.socket._cookieJar) === null || _a === void 0 ? void 0 : _a.appendCookies(headers);\n      return fetch(this.uri(), {\n        method: isPost ? \"POST\" : \"GET\",\n        body: isPost ? data : null,\n        headers: headers,\n        credentials: this.opts.withCredentials ? \"include\" : \"omit\"\n      }).then(function (res) {\n        var _a;\n        // @ts-ignore getSetCookie() was added in Node.js v19.7.0\n        (_a = _this3.socket._cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(res.headers.getSetCookie());\n        return res;\n      });\n    }\n  }]);\n  return Fetch;\n}(Polling);","map":{"version":3,"names":["Polling","Fetch","_fetch","then","res","ok","onError","status","text","data","onData","catch","err","callback","_a","isPost","undefined","headers","Headers","opts","extraHeaders","set","socket","_cookieJar","appendCookies","fetch","uri","method","body","credentials","withCredentials","parseCookies","getSetCookie"],"sources":["C:/Users/diarrhea/Downloads/exchangePro-main/client/node_modules/engine.io-client/build/esm/transports/polling-fetch.js"],"sourcesContent":["import { Polling } from \"./polling.js\";\n/**\n * HTTP long-polling based on the built-in `fetch()` method.\n *\n * Usage: browser, Node.js (since v18), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/fetch\n * @see https://caniuse.com/fetch\n * @see https://nodejs.org/api/globals.html#fetch\n */\nexport class Fetch extends Polling {\n    doPoll() {\n        this._fetch()\n            .then((res) => {\n            if (!res.ok) {\n                return this.onError(\"fetch read error\", res.status, res);\n            }\n            res.text().then((data) => this.onData(data));\n        })\n            .catch((err) => {\n            this.onError(\"fetch read error\", err);\n        });\n    }\n    doWrite(data, callback) {\n        this._fetch(data)\n            .then((res) => {\n            if (!res.ok) {\n                return this.onError(\"fetch write error\", res.status, res);\n            }\n            callback();\n        })\n            .catch((err) => {\n            this.onError(\"fetch write error\", err);\n        });\n    }\n    _fetch(data) {\n        var _a;\n        const isPost = data !== undefined;\n        const headers = new Headers(this.opts.extraHeaders);\n        if (isPost) {\n            headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n        }\n        (_a = this.socket._cookieJar) === null || _a === void 0 ? void 0 : _a.appendCookies(headers);\n        return fetch(this.uri(), {\n            method: isPost ? \"POST\" : \"GET\",\n            body: isPost ? data : null,\n            headers,\n            credentials: this.opts.withCredentials ? \"include\" : \"omit\",\n        }).then((res) => {\n            var _a;\n            // @ts-ignore getSetCookie() was added in Node.js v19.7.0\n            (_a = this.socket._cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(res.headers.getSetCookie());\n            return res;\n        });\n    }\n}\n"],"mappings":";;;;AAAA,SAASA,OAAO,QAAQ,cAAc;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAaC,KAAK;EAAA;EAAA;EAAA;IAAA;IAAA;EAAA;EAAA;IAAA;IAAA,OACd,kBAAS;MAAA;MACL,IAAI,CAACC,MAAM,EAAE,CACRC,IAAI,CAAC,UAACC,GAAG,EAAK;QACf,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE;UACT,OAAO,KAAI,CAACC,OAAO,CAAC,kBAAkB,EAAEF,GAAG,CAACG,MAAM,EAAEH,GAAG,CAAC;QAC5D;QACAA,GAAG,CAACI,IAAI,EAAE,CAACL,IAAI,CAAC,UAACM,IAAI;UAAA,OAAK,KAAI,CAACC,MAAM,CAACD,IAAI,CAAC;QAAA,EAAC;MAChD,CAAC,CAAC,CACGE,KAAK,CAAC,UAACC,GAAG,EAAK;QAChB,KAAI,CAACN,OAAO,CAAC,kBAAkB,EAAEM,GAAG,CAAC;MACzC,CAAC,CAAC;IACN;EAAC;IAAA;IAAA,OACD,iBAAQH,IAAI,EAAEI,QAAQ,EAAE;MAAA;MACpB,IAAI,CAACX,MAAM,CAACO,IAAI,CAAC,CACZN,IAAI,CAAC,UAACC,GAAG,EAAK;QACf,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE;UACT,OAAO,MAAI,CAACC,OAAO,CAAC,mBAAmB,EAAEF,GAAG,CAACG,MAAM,EAAEH,GAAG,CAAC;QAC7D;QACAS,QAAQ,EAAE;MACd,CAAC,CAAC,CACGF,KAAK,CAAC,UAACC,GAAG,EAAK;QAChB,MAAI,CAACN,OAAO,CAAC,mBAAmB,EAAEM,GAAG,CAAC;MAC1C,CAAC,CAAC;IACN;EAAC;IAAA;IAAA,OACD,gBAAOH,IAAI,EAAE;MAAA;MACT,IAAIK,EAAE;MACN,IAAMC,MAAM,GAAGN,IAAI,KAAKO,SAAS;MACjC,IAAMC,OAAO,GAAG,IAAIC,OAAO,CAAC,IAAI,CAACC,IAAI,CAACC,YAAY,CAAC;MACnD,IAAIL,MAAM,EAAE;QACRE,OAAO,CAACI,GAAG,CAAC,cAAc,EAAE,0BAA0B,CAAC;MAC3D;MACA,CAACP,EAAE,GAAG,IAAI,CAACQ,MAAM,CAACC,UAAU,MAAM,IAAI,IAAIT,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACU,aAAa,CAACP,OAAO,CAAC;MAC5F,OAAOQ,KAAK,CAAC,IAAI,CAACC,GAAG,EAAE,EAAE;QACrBC,MAAM,EAAEZ,MAAM,GAAG,MAAM,GAAG,KAAK;QAC/Ba,IAAI,EAAEb,MAAM,GAAGN,IAAI,GAAG,IAAI;QAC1BQ,OAAO,EAAPA,OAAO;QACPY,WAAW,EAAE,IAAI,CAACV,IAAI,CAACW,eAAe,GAAG,SAAS,GAAG;MACzD,CAAC,CAAC,CAAC3B,IAAI,CAAC,UAACC,GAAG,EAAK;QACb,IAAIU,EAAE;QACN;QACA,CAACA,EAAE,GAAG,MAAI,CAACQ,MAAM,CAACC,UAAU,MAAM,IAAI,IAAIT,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACiB,YAAY,CAAC3B,GAAG,CAACa,OAAO,CAACe,YAAY,EAAE,CAAC;QAC9G,OAAO5B,GAAG;MACd,CAAC,CAAC;IACN;EAAC;EAAA;AAAA,EA5CsBJ,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}